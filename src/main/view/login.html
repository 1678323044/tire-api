<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title></title>
		<link href="https://cdn.bootcdn.net/npm/bootstrap@3.3.7/dist/css/bootstrap.min.css" rel="stylesheet">
	</head>
	<body style="padding: 40px 0;background: #EEEEEE;">
		<div class="container">
	      <form class="form-signin" style="max-width: 330px;padding: 15px;margin: 0 auto;">
	        <h2 class="form-signin-heading">后台管理系统</h2>
	        <label for="inputEmail" class="sr-only">用户名</label>
	        <input name="username" class="form-control" id="username" placeholder="用户名" required autofocus value="{{.Username}}">
	        <label for="inputPassword" class="sr-only">密码</label>
	        <input type="password" id="password" name="password" class="form-control" placeholder="密码" required value="{{.Password}}">
	        <div class="checkbox">
	          <label>
	          	{{if eq .Checked true}}
	            	<input type="checkbox" name="remember" id="remember" value="on" checked="checked"> 记住密码
				{{else}}
					<input type="checkbox" name="remember" id="remember"> 记住密码
				{{end}}
	          </label>
	        </div>
	        <button class="btn btn-lg btn-primary btn-block" onclick="return check()" type="button" id="HB-btn">登录</button>
	      </form>
	    </div> <!-- /container -->
	</body>
</html>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script>
	function check() {
		var username = $("#username").val();
		var trimUsername = $.trim(username);
		if (trimUsername == ""){
			alert("用户名不能为空！");
			$("#username").focus();
			return false;
		}
		var trimPassword = $("#password").val();
		if (trimPassword == ""){
			alert("密码不能为空！");
			$("#password").focus();
			return false;
		}
	}
</script>
<script>
	$("#HB-btn").click(function(){
		$.ajax({
			type:"post",
			url:"/handlelogin",
			data: {
				username: $('#username').val(),
				password: $('#password').val(),
				remember: $('#remember').val(),
			},
			success: function(data){
				if(data.statuscode == 1001){
					alert(data.error);
				}else if(data.statuscode == 0){
					$(location).attr('href','/companies');
				}
			},
			error: function(XMLHttpRequest,textStatus,errorThrown){
				console.log(XMLHttpRequest);
				console.log(textStatus);
				console.log(errorThrown);
			},
			complete: function(){
				console.log('请求完成');
			}
		});
	})
</script>
